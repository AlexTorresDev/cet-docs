---
import type { CollectionEntry } from "astro:content";

import HeadCommon from "../components/HeadCommon.astro";
import HeadSEO from "../components/HeadSEO.astro";
import Header from "../components/Header/Header.astro";
import Footer from "../components/Footer/Footer.astro";
import { SITE } from "../consts";

type Props = CollectionEntry<"docs">["data"];

const { headings, ...data } = Astro.props;
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const currentPage = Astro.url.pathname;
const currentFile = `src/content/docs${currentPage.replace(/\/$/, "")}.md`;
---

<html dir={data.dir} lang={data.lang}>
	<head>
		<HeadCommon />
		<HeadSEO {...data} canonicalUrl={canonicalURL} />
		<title>
			{`${data.title} ðŸš€ ${SITE.title}`}
		</title>
	</head>

	<body>
		<Header currentPage={currentPage} />
		<main class="layout pt-24 grid grid-flow-col overflow-x-hidden">
			<slot />
		</main>
		<Footer path={currentFile} />
	</body>
</html>
