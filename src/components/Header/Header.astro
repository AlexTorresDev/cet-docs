---
import { getLanguageFromURL, KNOWN_LANGUAGE_CODES } from "../../languages";
import { SITE } from "../../consts";
import SkipToContent from "./SkipToContent.astro";
import LanguageSelect from "./LanguageSelect";
import Search from "./Search";
import ThemeSwitcher from "./ThemeSwitcher.astro";

type Props = {
	currentPage: string;
	isDocs?: boolean;
};

const { currentPage, isDocs = false } = Astro.props;
const lang = getLanguageFromURL(currentPage);
---

<header
	class="sticky top-0 z-30 flex h-16 w-full justify-center bg-opacity-90 backdrop-blur transition-all duration-100 bg-base-100 text-base-content shadow-sm"
>
	<SkipToContent />
	<nav class="navbar">
		<label
			tabindex="0"
			for="my-drawer"
			class:list={[
				"btn btn-ghost btn-square mr-3",
				{
					"md:hidden inline-flex": isDocs,
				},
			]}
		>
			<svg
				xmlns="http://www.w3.org/2000/svg"
				viewBox="0 0 24 24"
				class="h-5 w-5"
				fill="currentColor"
			>
				<path d="M4 6h16v2H4zm0 5h16v2H4zm0 5h16v2H4z"></path>
			</svg>
		</label>
		<div class="navbar-start">
			<a
				class="inline-flex gap-2 items-end normal-case text-xl md:px-4 px-2 transition-all hover:scale-110 md:hidden"
				href={`/${lang}/`}
			>
				<span class="text-sm md:text-xl">{SITE.title}</span>
			</a>
			<Search client:idle />
		</div>

		<div class="navbar-center hidden"></div>
		<div class="navbar-end gap-2">
			{
				KNOWN_LANGUAGE_CODES.length > 1 && (
					<LanguageSelect lang={lang} client:idle />
				)
			}

			<ThemeSwitcher />
		</div>
	</nav>
</header>
